{% extends 'teacher/base.html' %}

{% block title %} Student Report {% endblock title %}

{% block body %}
    <div class="search" style="margin-top: 50px">
        <form method="POST" action={% url 'student_report' %}>
            {% csrf_token %}
            <label for="name">Reg No</label>
            {{ form.reg_no }}
            <label for="name">Course</label>
            {{ form.course }}
            <label for="date_from">Date From</label>
            <input type="date" id="date_from" name="date_from" {% if date_from %} value="{{ date_from }}" {% endif %}>
            <label for="date_to">Date To</label>
            <input type="date" id="date_to" name="date_to" {% if date_to %} value="{{ date_to }}" {% endif %}>
            <button type="submit" class="btn btn-primary" style="margin-left: 50px;">Search</i></button>
        </form>
    </div>

    {% if search %}
        <table class="table table-bordered">
        <thead>
            <tr>
            <th scope="col">Sr No</th>
            <th scope="col">Reg No</th>
            <th scope="col">Name</th>
            <th scope="col">Course</th>
            <th scope="col">Date</th>
            <th scope="col">Attendance</th>
            </tr>
        </thead>
        <tbody>
            {% for obj in search %}
                <tr>
                    <th scope="row">{{ forloop.counter }}</th>                    
                    <td>{{ obj.student.reg_no }}</td>
                    <td>{{ obj.student.student_name }}</td>
                    <td>{{ obj.course }}</td>
                    <td>{{ obj.time }}</td>
                    <td>{{ obj.status }}</td>
                </tr>
            {% endfor %}
        </tbody>
        </table>
        <div class="csv-btn">
            <a href="{% url 'generate_student_csv' %}?pk={{ data_obj_pk }}"><button type="submit" class="btn btn-primary">Download CSV</i></button></a>
        </div>
    {% else %}
        <div class="col-md-4"></div>
        <img src="/media/images/no_data.jpg" alt="No data" width="400" height="400">
    {% endif %}

{% endblock body %}